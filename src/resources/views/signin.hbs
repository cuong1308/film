<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous">
    <link rel="stylesheet"  href="/css/app.css">
    <title>Document</title>
  </head>
  <body>
    <section class="auth row">
      <div class="sidenav col-md-6">
        <div class="login-main-image">
          <a href="/">
            <img srcset="/img/logoo.png 2x" alt="" class="logo" />
          </a>
          <img class="marverl" src="/img/marvel.png" alt="" />
        </div>
        <div class="login-main-text">

        </div>
      </div>
      <div class="main col-md-6">
        <div class="animation-spiderman">
          <img srcset="/img/spiderman.png 2x" alt="" />
        </div>
        <div class="col-md-6 col-sm-12">
          <div class="login-form">

            <div>
              <h3 class="login-title">
                Đăng nhập
              </h3>
              <h5 class="login-content">
                <strong>WebPhim</strong>
                trải nghiệm những bộ phim chất lượng nhât !
              </h5>
              <div class="form-group form-username">
                <label>Tên đăng nhập: </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Nhập tên tài khoản"
                  id="username"
                  name="username"
                />
                {{!-- <div class="error error-username">
                  Vui lòng nhập tài khoản
                </div> --}}
              </div>
              <div class="form-group form-password">
                <label>Mật khẩu</label>
                <input
                  type="password"
                  class="form-control"
                  placeholder="Mật khẩu"
                  id="password"
                  name="password"
                />
                {{!-- <div class="error error-password">
                  Vui lòng nhập mật khẩu
                </div> --}}

              </div>

              <div class="forgot-password">
                Quên mật khẩu
              </div>
              <button id="btnLogin" type="button" class="btn btn-black">Đăng
                nhập</button>
              <div class="register-page">
                Bạn chưa có tài khoản?
                <a href="/auth/signup">Đăng ký ngay</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

 <script>
    document.querySelector("#btnLogin").addEventListener("click",(e)=>{
      var password =  document.getElementById("password");
      var username =  document.getElementById("username");
      var urlencoded = new URLSearchParams();
        urlencoded.append("username", username.value);
        urlencoded.append("password", password.value);
        fetch('http://localhost:3001/auth/login',{
          method:'post',
          headers:{
             'Content-Type': 'application/x-www-form-urlencoded'
          },
          body:urlencoded
        })
      .then(res => res.json())
      .then(data => {
        if (data.status === 'success') {
          window.location.href = "http://localhost:3001/"
          {{!-- window.localStorage.setItem("token", data.token);
          const jwt = window.localStorage.getItem("token");
          if(jwt) {
          window.location.href = "http://localhost:3001/"
          const name = data.user.name;

          document.querySelector('header-auth').innerHTML = `
            <div class="dropdown">
                  <i class="fa-solid fa-angle-down dropbtn"></i>

                  <div id="myDropdown" class="dropdown-content">
                    <div class="account-name">
                      ${name}
                    </div>
                    <div> Tài khoản</div>
                    <div class="header-logout" onclick="signOut()">
                      Đăng xuất
                    </div>
                  </div>
                </div>
          `;
          } --}}
        }
    
      })
      .catch(error => console.log(error));
    })
</script>


</body>
  
</html>